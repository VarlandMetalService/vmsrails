<p id="notice"><%= notice %></p>

<h1>Clock Records</h1>

<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @clock_records.each do |r| %>
      <tr>
        <td><%= User.find(r.user_id).full_name %>
        <td><%= r.record_type %>
        <td><%= r.timestamp.strftime("%m/%d/%y @ %I:%M%P") %>
        <div class="modal" tabindex="-1" role="dialog" id="myModal<%= r.id %>">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header text-center">
                Edit Record
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <p>
                  <% if r.clock_edit.blank? %>
                    <% @clock_edit = Timeclock::ClockEdit.new %>
                    <% @clock_edit.clock_record = Timeclock::ClockRecord.find(r.id) %>
                    <%= render partial: 'timeclock/clock_edits/form', locals: { :rid => r.id } %>
                  <% else %>
                    <% @clock_edit = r.clock_edit %>
                    <%= render partial: 'timeclock/clock_edits/form', locals: { :rid => r.id } %>
                  <% end %>
                </p>
              </div>
            </div>
          </div>
        </div>
        <td>
          <%= link_to 'Destroy', r, method: :delete, data: { confirm: 'Are you sure?' } %>
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal<%= r.id %>">
            Edit
          </button>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'Timeclock', timeclock_path %>
