<table class="table table-bordered table-striped table-hover">
  <thead class="thead-dark">
    <tr>
      <th class="col-xl-3 col-lg-4 col-md-6 col-sm-6 d-md-table-cell d-xs-none d-xs-none">Shop Order</th>
      <th class="col-xl-3 col-lg-4 d-lg-table-cell d-md-none d-sm-none d-xs-none">Process</th>
      <th class="col-xl-6 col-lg-4 col-md-6 col-sm-6 d-md-table-cell d-xs-none d-xs-none">Results (hours)</th>
    </tr>
  </thead>
  <tbody>
    <% @salt_spray_tests.each do |s| %>
    <tr>
      <td class="d-md-table-cell d-xs-none">
        <div class="row">
          <div class="col-12">
            <div class="pull-right">
              <button class="btn btn-sm" type="button" data-toggle="collapse" data-target=".info-collapse<%=s.id%>"><%= fa_icon('info')%></button>
              Dept: <%= s.dept %>
            </div>
            <a href="#" data-process-code="<%= s.process_code %>" title="Filter by process code" class="process-code-filter font-weight-bold">
              <span class="badge badge-warning badge-border float-left mr-2" style="font-size: 40px;  border: 5px solid #343a40;"><%= s.process_code %></span>
            </a>
            <strong class="pull-left" style="font-size: 20px;">
              <%= s.so_num  %> 
            </strong>
            <div class="text-muted d-inline px-2">  Load: <%= s.load_num %></div>
            <br>
            <div class="pull-left">
              <%= s.customer %> - 
              <%= s.part_tag %> 
              <%= s.sub_tag unless s.sub_tag.blank? %>
              <br>
              <div class="text-muted">
                <%= s.salt_spray_test_checks.first.date.strftime("%D") %>
              </div>
            </div>
          </div>
          <div class="col-12">
            <div class="collapse info-collapse<%=s.id%>">
              <div class="row">
                <div class="col-12">
                  <small><strong>
                  Part Area:   <%= s.part_area unless s.part_area.blank? %><br>
                  Density:     <%= s.part_density unless s.part_density.blank?%><br>
                  Load Weight: <%= s.load_weight unless s.load_weight.blank?%><br>
                  </strong></small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </td>
      <td class="d-sm-none d-md-none d-lg-table-cell d-sm-none d-xs-none">
          <small><strong>By:</small></strong>
          <%= User.find(s.user_id).full_name unless s.user_id.blank? %>
          <br>
          <p class="float-left border mr-2">
                Process Step 1 <br>
                Process Step 2 <br>
          </p>
      </td>
      <td class="d-md-table-cell d-xs-none">
        <div class="container-flex">
          <div class="text-left"><button class="btn btn-sm" type="button" data-toggle="collapse" data-target=".checks-collapse<%=s.id%>"><%= fa_icon('list', text: "History")%></button></div>
          
          <div class="progress bg-light" style="height: 30px;">
            <div class="progress-bar bg-secondary" role="progressbar" style="width: <%= 100*(s.white_spec.to_f/s.red_spec.to_f) %>%"><p class="text-right mr-1" style="margin-top: 12.5px;"><%= s.white_spec %></p></div>
            <div class="progress-bar bg-dark" role="progressbar" style="width:  <%= 100 - 100*(s.white_spec.to_f/s.red_spec.to_f) %>%"><p class="text-right mr-1" style="margin-top: 12.5px;"><%= s.red_spec %></p></div>
          </div>
          <div class="progress bg-dark" style="height: 25px; margin-top: -5px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning" role="progressbar" style="width: <%= 100*((Time.now - s.salt_spray_test_checks.first.date)/60.minutes).to_f/s.red_spec.to_f %>%;"><strong class="text-right text-dark mr-1" style="font-size: 1.5rem;"><%= ((Time.now - s.salt_spray_test_checks.first.date)/60.minutes).round %></strong></div>
          </div>
          <div class="collapse checks-collapse<%=s.id%>">
            <% x = s.salt_spray_test_checks.in_groups(3, false) %>
              <div class="row">
            <% x.each do |g| %>
              <div class="col-4">
              <% g.each do |c| %>
                <%= c.date.strftime("%D") %> - <%= c.c_type %>
                <br>
              <% end %> 
              </div>
            <% end %><div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>