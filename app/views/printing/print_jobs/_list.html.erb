<div class="row">
  <div class="col">
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th></th>
          <th>Timestamp</th>
          <th>Print Queue</th>
          <th>User</th>
          <th>Doc Type</th>
          <th>Workstation</th>
          <th class="text-center">File</th>
          <th class="text-center">Links</th>
        </tr>
      </thead>
      <tbody>
        <% @print_jobs.each do |p| %>
        <tr>
          <td class="text-center text-light <%= p.is_complete ? 'bg-success' : 'bg-danger' %>">
            <%= p.is_complete ? 
                  (fa_icon ["check", "3x"]) : (fa_icon ["times", "3x"]) %>
          </td>
          <td><%= p.created_at.strftime("%m/%d @ %I:%M %p") %></td>
          <td>
            <%= %Q[#{Printing::PrintQueue.find(p.print_queue_id).printer} #{Printing::PrintQueue.find(p.print_queue_id).options}] unless !Printing::PrintQueue.all.map{|q| q.id }.include?(p.print_queue_id) %>
          </td>
          <td>
            <%= User.find(p.user_id).full_name unless p.user_id.blank? %>
          </td> 
          <td>
            <%= DocumentType.find(p.document_type_id).name unless p.document_type_id.blank? %>
          </td>
          <td>
            <%= p.workstation_id  %>
          </td>
          <td class="text-center">
            <%= link_to "Download", p.file.url, target: :blank %>
          </td>
          <td class="text-center">
            <div class="btn-group" role="group">
              <%= link_to fa_icon('share'),
                                send_print_cmd_printing_print_jobs_path(:id => p.id),
                                class: 'font-weight-bold btn btn-sm btn-success',
                                title: 'Send Print Job',
                                data: { toggle: 'tooltip' } %>
              <%= link_to fa_icon('retweet'),
                          set_queue_printing_print_jobs_path(:id => p.id),
                          class: 'font-weight-bold btn btn-sm btn-warning',
                          title: 'Recalculate Print Queue',
                          data: { toggle: 'tooltip' } %>
              <%= link_to fa_icon('times'),
                          printing_print_job_path(p),
                          method: :delete,
                          class: 'font-weight-bold btn btn-sm btn-danger',
                          title: 'Delete Print Job',
                          data: { confirm: 'Are you sure you want to delete this Print Job?',                            toggle: 'tooltip' } %>
            </div>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>