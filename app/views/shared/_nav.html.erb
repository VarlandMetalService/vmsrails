<div class="container-fluid">
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <%= link_to image_tag("logo2.png", alt: "Brand"), root_path, :class=>'navbar-brand ml-1' %>

  <button class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#vmsNavContent"
          aria-controls="vmsNavContent"
          aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  
  <div class="collapse navbar-collapse justify-content-between"
       id="vmsNavContent">
    <ul class="navbar-nav">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Reports
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <%= link_to 'Department Info', dept_info_path, 
            class: "dropdown-item" %>
            <%= link_to 'Scheduled Tasks', maintenance_scheduled_task_status_path, class: "dropdown-item" %>
            <%= link_to 'Specifications', specifications_path, 
            class: "dropdown-item" %>
          <div class="dropdown-divider"></div>
            <%= link_to 'Jobs on Receipt', queries_receipts_path, 
            class: "dropdown-item" %>
            <%= link_to 'Promise List', queries_promise_list_path, 
            class: "dropdown-item" %>
          <div class="dropdown-divider"></div>
            <%= link_to 'Opto Logs', opto_logs_path, 
            class: "dropdown-item" %>
            <%= link_to 'Thickness Readings', thickness_path, 
            class: "dropdown-item" %>
            <%= link_to 'Vat History Notes', materials_vat_history_notes_path, 
            class: "dropdown-item" %>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Apps
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <%= link_to 'Shift Notes', shift_notes_path, 
          class: "dropdown-item" %>
          <%= link_to 'Salt Spray Tests', '/salt_spray_tests', 
            class: "dropdown-item" %>
          <div class="dropdown-divider"></div>
          <%= link_to 'Timeclock', timeclock_path, 
          class: "dropdown-item" %>
          <%= link_to 'Payroll Periods', '/timeclock/clock_periods', 
            class: "dropdown-item" %>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Printing
        </a>
        <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
            <a class="dropdown-item" href='/print_jobs'>Print Jobs</a>
            <a class="dropdown-item" href="/print_queues">Print Queues</a>
            <a class="dropdown-item" href="/print_queue_rules">Print Queue Rules</a>
          </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          QC
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <%= link_to 'Salt Spray (Broken)', qc_salt_spray_path, 
            class: "dropdown-item" %>
            <%= link_to 'Rejected Parts', new_qc_rejected_part_path, 
            class: "dropdown-item" %>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" area-haspopup="true" aria-expanded="false">Prop65</a>
        <form class="dropdown-menu text-center p-4 " action="/queries/prop65" method="get"> <u>Proposition 65</u>
        <%= form_for "", { class: "dropdown-menu p-4" } do |f| %>
          <div class="form-group">
            <%= f.text_field :customer, placeholder: "Customer Code" %>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
          <% end %>
      </li>   
    </ul>
    <ul class="navbar-nav">
      <strong class="nav-link text-muted", id="clock"></strong>
    <% unless @current_user.nil? %>
      
        <% if @current_user.is_admin %>
          <li class="nav-item dropdown dropdown-right">
            <a class="nav-link dropdown-toggle p-1"
              href="#" id="adminDropdown"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false">
              <%= fa_icon 'cogs 2x' %>
            </a>
            <div class="dropdown-menu" aria-labelledby="adminDropdown">
              <%= link_to 'Manage Users', admin_users_url, class: 'dropdown-item' %>
              <%= link_to 'Manage Permissions', admin_permissions_url, class: 'dropdown-item' %>
            </div>
          </li>
        <% end %>
        <%= nav_link 'sessions', 'destroy', 'sign-out', logout_path, :delete %>
      </ul>
    <% end %>
</nav>
</div>

<script type="text/javascript">
  window.onload = function startTime() {
    y = "AM"
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    var d = today.getDate();
    var t = today.getMonth()+1;
    var x = ""
    switch (today.getDay()) {
    case 0:
        x = "Sun";
        break;
    case 1:
        x = "Mon";
        break;
    case 2:
        x = "Tue";
        break;
    case 3:
        x = "Wed";
        break;
    case 4:
        x = "Thu";
        break;
    case 5:
        x = "Fri";
        break;
    case 6:
        x = "Sat";
}
    t = padTime(t);
    d = padTime(d);
    m = padTime(m);
    s = padTime(s);
    if (h > 12) {y = "PM"};
    h = checkHours(h);
    document.getElementById('clock').innerHTML =
    x + " " + t + "/" + d + " - " + h + ":" + m + ":" + s + " " + y;
    var t = setTimeout(startTime, 500);
  }
  function padTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
  }
  function checkHours(i) {
    if (i == 0) {i = 12};
    if (i < 10) {i = "0" + i};
    if (i > 12) {i = i - 12 };
    return i;
  }
</script>